{% extends "base.html" %}

{% block content %}

<h2>ğŸ“š Mes cours rÃ©cents</h2>

<input type="text" id="searchInput" placeholder="Rechercher un cours..."
       onkeyup="filterCourses()" />

<table style="width:100%; margin-top:25px;">
    <thead>
        <tr>
            <th>Sujet</th>
            <th>Niveau</th>
            <th>DurÃ©e prÃ©vue</th>
            <th>Temps passÃ©</th>
            <th>Date</th>
        </tr>
    </thead>
    <tbody id="courseTable">
        {% for course in courses %}
        <tr>
            <td>{{ course.topic }}</td>
            <td>{{ course.level }}</td>
            <td>{{ course.duration }}</td>
            <td>{{ course.time_spent }} min</td>
            <td>{{ course.created_at.strftime('%d/%m/%Y') }}</td>
        </tr>
        {% endfor %}
    </tbody>
</table>

<div class="cta-group">
    <a href="/generator" class="btn btn-primary">ğŸ¤– GÃ©nÃ©rer un parcours</a>
    <a href="/dashboard" class="btn btn-outline">ğŸ“Š Dashboard</a>
</div>

<script>
function filterCourses() {
    const input = document.getElementById("searchInput").value.toLowerCase();
    const rows = document.querySelectorAll("#courseTable tr");

    rows.forEach(row => {
        const text = row.innerText.toLowerCase();
        row.style.display = text.includes(input) ? "" : "none";
    });
}
</script>

{% endblock %}
